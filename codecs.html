<html>
   <head>
      <meta charset="utf-8">
      <script src="assets/js/jquery-3.7.1.js"></script>
      <script src="assets/bootstrap/js/bootstrap.min.js"></script>
   </head>
   <body>
      <div class="container" style="padding-left: 0px;padding-right: 0px;margin: 0px;margin-left: 20px;margin-bottom: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;">
          <div class="row" style="width:40%; margin-right: 10%;margin-left: 0px;">
              <div class="col">
                  <span style="color:black; font-size: 20px; font-weight:bold; margin-left: -.75rem;"><p id="codec_label">Кодек</p></span>
                  <br></br>    
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-1">Приоритет</p></div>
                          <input id="g711a" class="priority">
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-1">Кодек</p></div>
                          <input class="codec" value="G.711a" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-2">Приоритет</p></div>
                          <input id="g711u" class="priority">
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-2">Кодек</p></div>
                          <input class="codec" value="G.711u" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-3">Приоритет</p></div>
                          <input id="g722" class="priority">
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-3">Кодек</p></div>
                          <input class="codec" value="G.722" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-4">Приоритет</p></div>
                          <input id="g729" class="priority">
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-4">Кодек</p></div>
                          <input class="codec" value="G.729" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-5">Приоритет</p></div>
                          <input id="opus" class="priority">
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-5">Кодек</p></div>
                          <input class="codec" value="OPUS" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-6">Приоритет</p></div>
                          <input id="speex" class="priority">
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-6">Кодек</p></div>
                          <input class="codec" value="SPEEX" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-7">Приоритет</p></div>
                          <input id="g726" class="priority">
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-7">Кодек</p></div>
                          <input class="codec" value="G.726" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-8">Приоритет</p></div>
                          <input id="ilbc" class="priority">
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-8">Кодек</p></div>
                          <input class="codec" value="iLBC" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-9">Приоритет</p></div>
                          <input id="g723" class="priority" >
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-9">Кодек</p></div>
                          <input class="codec" value="G.723" disabled>
                      </div>
                  </div> 
                  <div class="row codec-row"> 
                      <div class="col codec-column">
                          <div class="priority-label"><p id="prioritet-10">Приоритет</p></div>
                          <input id="" class="priority" >
                      </div>
                      <div class="col codec-column">
                          <div class="codec-label"><p id="codex-10">Кодек</p></div>
                          <input class="codec" disabled>
                      </div>
                  </div>
                  <br></br>
                  <!--<div class="row" style="height: 50px; border: none; margin-bottom: 10px; align-items: center;"> 
                      <button id="cancel-button" type="button" class="btn" style="width: 48%; height: 100%; margin-right: 2%; color: white; background: #9A9A9A;">Отмена</button>
                      <button id="save-button" type="button" class="btn" style="width: 48%; height: 100%; margin-left: 2%; color: white; background: #7BAF21;">Сохранить</button>   
                  </div>-->
              </div>
          </div>
      </div>
      <nav id="side-button" class="navbar navbar-expand-md navbar-dark fixed-right" style="display: flex; flex-direction: column; justify-content: space-between; align-items: center;">
        <div style="display: flex; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; padding: 20px;">
            <button id="save-button" type="button" class="btn" style="display: flex; align-items: center; color: white; background: #9A9A9A; width: 155px; justify-content: center;">
                Сохранить
            </button>
            <button id="cancel-button" type="button" class="btn" style="display: flex; align-items: center; color: white; background: #9A9A9A; width: 155px; justify-content: center;">
                Сбросить
            </button>
            <button id="restart-button" type="button" class="btn" style="display: flex; align-items: center; color: white; background: #9A9A9A; width: 155px; justify-content: center; border-radius: .35rem;">
                Перезагрузить
            </button>
        </div>
    </nav>
      <script type='text/javascript' src="assets/js/translation.js"></script>
      <script type='text/javascript'>
           $(function() {
              var codecs = window.codecs.split(",");
              var defaultCodecs = window.defaultCodecs.split(",");
              console.log(defaultCodecs);
              console.log(codecs);
              if ( window.codecs == window.defaultCodecs ) {
                  $('#g711a').val("1");
                  $('#g711u').val("2");
                  $('#g722').val("3");
                  $('#g729').val("4");
                  $('#opus').val("5");
                  $('#speex').val("6");
                  $('#g726').val("7");
                  $('#ilbc').val("8");
                  $('#g723').val("9");
              }
              else {
                  for ( var i = 0; i < defaultCodecs.length; i++ ) {
                       var index = codecs.indexOf(defaultCodecs[i]);       
                       if ( index != -1 ) {
                           $('#' + defaultCodecs[i]).val(index + 1);
                       }      
                  }
              }   
           });
         $('#cancel-button').on( "click", function() {
              $('#content').load("sip.html");  
         });

         $('#save-button').on( "click", function() {
              var inputs = $("input.priority");   
              var priorities = $.map(inputs, function(input) { 
                     return {name: input.id, priority: input.value}; });
              priorities.sort(function(a,b){
                     return a.priority - b.priority;
              });
              var codecs = priorities.map(priority => priority.name).filter(n => n).join(',')
              console.log(codecs);   
              window.codecs = codecs;
              $('#content').load("sip.html");
         });

      </script>
  </body>
</html>
